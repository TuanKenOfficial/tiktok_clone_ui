{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactjs\\\\tiktok-ui\\\\src\\\\layouts\\\\components\\\\Search\\\\Search.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\nimport { faCircleXmark, faSpinner } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport HeadlessTippy from '@tippyjs/react/headless';\nimport classNames from 'classnames/bind';\nimport * as searchServices from \"../../../services/searchService\";\nimport { Wrapper as PopperWrapper } from \"../../../components/Popper\";\nimport AccountItem from \"../../../components/AccountItem\";\nimport { SearchIcon } from \"../../../components/Icons\";\nimport { useDebounce } from \"../../../hooks\";\nimport styles from \"./Search.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\nfunction Search() {\n  _s();\n  const [searchValue, setSearchValue] = useState('');\n  const [searchResult, setSearchResult] = useState([]);\n  const [showResult, setShowResult] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const debouncedValue = useDebounce(searchValue, 500);\n  const inputRef = useRef();\n  useEffect(() => {\n    if (!debouncedValue.trim()) {\n      setSearchResult([]);\n      return;\n    }\n    const fetchApi = async () => {\n      setLoading(true);\n      const result = await searchServices.search(debouncedValue);\n      setSearchResult(result);\n      setLoading(false);\n    };\n    fetchApi();\n  }, [debouncedValue]);\n  const handleClear = () => {\n    setSearchValue('');\n    setSearchResult([]);\n    inputRef.current.focus();\n  };\n  const handleHideResult = () => {\n    setShowResult(false);\n  };\n  const handleChange = e => {\n    const searchValue = e.target.value;\n    if (!searchValue.startsWith(' ')) {\n      setSearchValue(searchValue);\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // Using a wrapper <div> tag around the reference element solves\n    // this by creating a new parentNode context.\n    _jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(HeadlessTippy, {\n        interactive: true,\n        visible: showResult && searchResult.length > 0,\n        render: attrs => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx('search-result'),\n          tabIndex: \"-1\",\n          ...attrs,\n          children: /*#__PURE__*/_jsxDEV(PopperWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: cx('search-title'),\n              children: \"Accounts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this), searchResult.map(result => /*#__PURE__*/_jsxDEV(AccountItem, {\n              data: result\n            }, result.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this),\n        onClickOutside: handleHideResult,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx('search'),\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: inputRef,\n            value: searchValue,\n            placeholder: \"Search accounts and videos\",\n            spellCheck: false,\n            onChange: handleChange,\n            onFocus: () => setShowResult(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this), !!searchValue && !loading && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: cx('clear'),\n            onClick: handleClear,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCircleXmark\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), loading && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            className: cx('loading'),\n            icon: faSpinner\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: cx('search-btn'),\n            onMouseDown: e => e.preventDefault(),\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  );\n}\n_s(Search, \"qVx2BC+dEe2xBHyP2nEcfKte61U=\", false, function () {\n  return [useDebounce];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useEffect","useState","useRef","faCircleXmark","faSpinner","FontAwesomeIcon","HeadlessTippy","classNames","searchServices","Wrapper","PopperWrapper","AccountItem","SearchIcon","useDebounce","styles","jsxDEV","_jsxDEV","cx","bind","Search","_s","searchValue","setSearchValue","searchResult","setSearchResult","showResult","setShowResult","loading","setLoading","debouncedValue","inputRef","trim","fetchApi","result","search","handleClear","current","focus","handleHideResult","handleChange","e","target","value","startsWith","children","interactive","visible","length","render","attrs","className","tabIndex","fileName","_jsxFileName","lineNumber","columnNumber","map","data","id","onClickOutside","ref","placeholder","spellCheck","onChange","onFocus","onClick","icon","onMouseDown","preventDefault","_c","$RefreshReg$"],"sources":["D:/reactjs/tiktok-ui/src/layouts/components/Search/Search.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\r\nimport { faCircleXmark, faSpinner } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport HeadlessTippy from '@tippyjs/react/headless';\r\nimport classNames from 'classnames/bind';\r\n\r\nimport * as searchServices from '~/services/searchService';\r\nimport { Wrapper as PopperWrapper } from '~/components/Popper';\r\nimport AccountItem from '~/components/AccountItem';\r\nimport { SearchIcon } from '~/components/Icons';\r\nimport { useDebounce } from '~/hooks';\r\nimport styles from './Search.module.scss';\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nfunction Search() {\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [searchResult, setSearchResult] = useState([]);\r\n    const [showResult, setShowResult] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const debouncedValue = useDebounce(searchValue, 500);\r\n\r\n    const inputRef = useRef();\r\n\r\n    useEffect(() => {\r\n        if (!debouncedValue.trim()) {\r\n            setSearchResult([]);\r\n            return;\r\n        }\r\n\r\n        const fetchApi = async () => {\r\n            setLoading(true);\r\n\r\n            const result = await searchServices.search(debouncedValue);\r\n\r\n            setSearchResult(result);\r\n            setLoading(false);\r\n        };\r\n\r\n        fetchApi();\r\n    }, [debouncedValue]);\r\n\r\n    const handleClear = () => {\r\n        setSearchValue('');\r\n        setSearchResult([]);\r\n        inputRef.current.focus();\r\n    };\r\n\r\n    const handleHideResult = () => {\r\n        setShowResult(false);\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const searchValue = e.target.value;\r\n        if (!searchValue.startsWith(' ')) {\r\n            setSearchValue(searchValue);\r\n        }\r\n    };\r\n\r\n    return (\r\n        // Using a wrapper <div> tag around the reference element solves\r\n        // this by creating a new parentNode context.\r\n        <div>\r\n            <HeadlessTippy\r\n                interactive\r\n                visible={showResult && searchResult.length > 0}\r\n                render={(attrs) => (\r\n                    <div className={cx('search-result')} tabIndex=\"-1\" {...attrs}>\r\n                        <PopperWrapper>\r\n                            <h4 className={cx('search-title')}>Accounts</h4>\r\n                            {searchResult.map((result) => (\r\n                                <AccountItem key={result.id} data={result} />\r\n                            ))}\r\n                        </PopperWrapper>\r\n                    </div>\r\n                )}\r\n                onClickOutside={handleHideResult}\r\n            >\r\n                <div className={cx('search')}>\r\n                    <input\r\n                        ref={inputRef}\r\n                        value={searchValue}\r\n                        placeholder=\"Search accounts and videos\"\r\n                        spellCheck={false}\r\n                        onChange={handleChange}\r\n                        onFocus={() => setShowResult(true)}\r\n                    />\r\n                    {!!searchValue && !loading && (\r\n                        <button className={cx('clear')} onClick={handleClear}>\r\n                            <FontAwesomeIcon icon={faCircleXmark} />\r\n                        </button>\r\n                    )}\r\n                    {loading && <FontAwesomeIcon className={cx('loading')} icon={faSpinner} />}\r\n\r\n                    <button className={cx('search-btn')} onMouseDown={(e) => e.preventDefault()}>\r\n                        <SearchIcon />\r\n                    </button>\r\n                </div>\r\n            </HeadlessTippy>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Search;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}